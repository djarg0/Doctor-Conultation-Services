<!DOCTYPE html>
<html lang="zxx">

    <!-- Mirrored from templates.hibootstrap.com/medsev/default/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Apr 2025 07:26:21 GMT -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
        <!-- Owl Carousel CSS -->
        <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
        <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
        <!-- Meanmenu CSS -->
        <link rel="stylesheet" href="assets/css/meanmenu.css">
        <!-- Icofonts CSS -->
        <link rel="stylesheet" href="assets/css/icofont.min.css">
        <!-- Slick Slider CSS -->
        <link rel="stylesheet" href="assets/css/slick.min.css">
        <link rel="stylesheet" href="assets/css/slick-theme.min.css">
        <!-- Magnific Popup CSS -->
        <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
        <!-- Animate CSS -->
        <link rel="stylesheet" href="assets/css/animate.min.css">
        <!-- Odometer CSS -->
        <link rel="stylesheet" href="assets/css/odometer.min.css">
        <!-- Style CSS -->
        <link rel="stylesheet" href="assets/css/style.css">
        <!-- Responsive CSS -->
        <link rel="stylesheet" href="assets/css/responsive.css">
        <!-- Theme Dark CSS -->
        <link rel="stylesheet" href="assets/css/theme-dark.css">

        <title>Medsev - Healthcare Clinic & Doctor HTML Template</title>

        <link rel="icon" type="image/png" href="assets/img/favicon.png">
        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    </head>
    <body onload="showBookings()">

        <!-- Preloader -->
        <div class="loader">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="spinner">
                        <div class="double-bounce1"></div>
                        <div class="double-bounce2"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Preloader -->

        <!-- Header Top -->
        <div th:replace="Header :: headertop"></div>
        <!-- End Header Top -->

        <!-- Start Navbar Area -->
        <div th:replace="UserHeader :: header"></div>



        <!-- End Navbar Area -->

        <div class="page-title-area page-title-four">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="page-title-item">
                        <h2>Manage Appointments</h2>
                        <ul>
                            <li>
                                <a href="/">Home</a>
                            </li>
                            <li>
                                <i class="icofont-simple-right"></i>
                            </li>
                            <li>Manage Appointments</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12">
                    <div class="card border-0 shadow">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped table-bordered custom_table">
                                    <thead class="table-primary">
                                        <tr>

                                            <th scope="col">Patient Name</th>
                                            <th scope="col">Doctor Name</th>
                                            <th scope="col">Doctor Specialty</th>
                                            <th scope="col">Contact</th>
                                            <th scope="col">Date</th>
                                            <th scope="col">Total Payment</th>
                                            <th scope="col">Slots</th>
                                            <th scope="col">Status</th>
                                            <th scope="col">Payment Mode</th>
                                        </tr>
                                    </thead>
                                    <tbody id="showRequest" class="align-top">

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--        <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>-->

        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content text-black" id="slotdiv">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Booked Slots</h4>
                    </div>
                    <div class="modal-body" >
                        <p style="color:black">Some text in the modal.</p>
                    </div>
                    
                </div>

            </div>
        </div>

        <!-- Footer -->
        <div th:replace="Footer :: footer"></div>
        <!-- End Footer -->

        <!-- Copyright -->
        
        <!-- End Copyright -->


        <!-- Essential JS -->
        <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/bootstrap.bundle.min.js"></script>
        <!-- Owl Carousel JS -->
        <script src="assets/js/owl.carousel.min.js"></script>
        <!-- Meanmenu JS -->
        <script src="assets/js/jquery.meanmenu.js"></script>
        <!-- Slider Slider JS -->
        <script src="assets/js/slick.min.js"></script>
        <!-- Magnific Popup -->
        <script src="assets/js/jquery.magnific-popup.min.js"></script>
        <!-- Wow JS -->
        <script src="assets/js/wow.min.js"></script>
        <!-- Form Ajaxchimp JS -->
        <script src="assets/js/jquery.ajaxchimp.min.js"></script>
        <!-- Form Validator JS -->
        <script src="assets/js/form-validator.min.js"></script>
        <!-- Contact JS -->
        <script src="assets/js/contact-form-script.js"></script>
        <!-- Odometer JS -->
        <script src="assets/js/odometer.min.js"></script>
        <script src="assets/js/jquery.appear.min.js"></script>
        <!-- Custom JS -->
        <script src="assets/js/custom.js"></script>

        <script>
        function showBookings() {

            var url = "/showUserBookings   ";

            fetch(url, {method: "GET"})
                    .then(response => response.text())
                    .then(ans => renderHTML(ans));
        }

        function renderHTML(ans) {
            var mainobj = JSON.parse(ans);
            var arr= mainobj["ans"];
            var s = "";
            for (var i = 0; i < arr.length; i++)
            {
                s += `<tr>`;
                s += `<td>`;
                s += arr[i].uname + `</td>`;
                
                s += `<td>`;
                s += arr[i].dname + `</td>`;
                s += `<td>`;
                s += arr[i].dspecialityname + `</td>`;
                s += `<td>`;
                s += arr[i].dcontact + `</td>`;
                s+=`<td>${arr[i].date}</td>`;
                s+=`<td>${arr[i].total_price}</td>`;
                s += `<td>`;
                s += `<button type="button" onclick="slots(${arr[i].booking_id})" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#myModal">Slots</button></td>`;
                s += `</td><td>`+arr[i].status + `</td>`;
                s += `<td>`;
                s += arr[i].payment_type + `</td>`;

                s += `</tr>`;
            }
            document.getElementById("showRequest").innerHTML = s;
        }

                                                function slots(bid) { 
                                                        
                                                var url = "/showSlots?bid="+bid;

                                                fetch(url, {method: "GET"})
                                                        .then(response => response.text())
                                                        .then(ans => renderSlots(ans));        
                                                }
                                                
                                                function renderSlots(ans) {

                                                var mainobj= JSON.parse(ans);
                                                var arr= mainobj["ans"];
                                                var s="";
                                                s+=`<div class="modal-header">
                                                            <h2 class="modal-title" style="color : black">Booked Slots</h2>
                                                        </div>
                                                        <div class="modal-body" >`;
                                                for(var i=0; i<arr.length; i++) {
                                                    s+=`<h4 style="color : black">Start Time: 
                                                                ${arr[i].start_slot}<br>
                                                                End Time: ${arr[i].end_slot}<br>
                                                                <br>
                                                            </h4>`;
                                                }
                                                s+=`</div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                                                    </div>`;
                                                    document.getElementById("slotdiv").innerHTML = s;
                                                }
                                                
                                                
        </script>
    </body>

</html>