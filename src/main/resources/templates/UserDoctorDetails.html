<!DOCTYPE html>
<html lang="zxx">
    
<!-- Mirrored from templates.hibootstrap.com/medsev/default/doctor-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Apr 2025 07:26:28 GMT -->
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

       <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
        <!-- Owl Carousel CSS -->
        <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
        <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
        <!-- Meanmenu CSS -->
        <link rel="stylesheet" href="assets/css/meanmenu.css">
        <!-- Icofonts CSS -->
        <link rel="stylesheet" href="assets/css/icofont.min.css">
        <!-- Slick Slider CSS -->
        <link rel="stylesheet" href="assets/css/slick.min.css">
        <link rel="stylesheet" href="assets/css/slick-theme.min.css">
        <!-- Magnific Popup CSS -->
        <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
        <!-- Animate CSS -->
        <link rel="stylesheet" href="assets/css/animate.min.css">
        <!-- Odometer CSS -->
        <link rel="stylesheet" href="assets/css/odometer.min.css">
        <!-- Style CSS -->
        <link rel="stylesheet" href="assets/css/style.css">
        <!-- Responsive CSS -->
        <link rel="stylesheet" href="assets/css/responsive.css">
        <!-- Theme Dark CSS -->
        <link rel="stylesheet" href="assets/css/theme-dark.css">
        <script  src="js/jquery-3.6.0.min.js"></script><!-- JQUERY.MIN JS -->
        <script  src="js/popper.min.js"></script><!-- POPPER.MIN JS -->
        <script  src="js/bootstrap.min.js"></script><!-- BOOTSTRAP.MIN JS -->
        
        
        <title>Medsev - Healthcare Clinic & Doctor HTML Template</title>

        <link rel="icon" type="image/png" href="assets/img/favicon.png">
    </head>
    <body onload="doctorDetails(), showPhotos(), userShowRatings()">
        
        <!-- Preloader -->
        <div class="loader">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="spinner">
                        <div class="double-bounce1"></div>
                        <div class="double-bounce2"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Preloader -->

        <!-- Header Top -->
        <div th:replace="Header :: headertop"></div>
        <!-- End Header Top -->
        
        <!-- Start Navbar Area -->
        <div th:replace="UserHeader :: header"></div>
        <!-- End Navbar Area -->

        <!-- Page Title -->
        <div id="showDetails">
        
        </div>
        <!-- End Doctor Details -->
        <div class="container">
        <div class="row justify-content-center">
        <div class="col-lg-12" style="text-align: center">
            <button type="button" class="btn btn-outline-primary btn-lg" style="border-radius: 10px;" onclick="review()" />Add Review</button>

                                </div>

                                <h2 style="text-align: center;" >Average Rating</h2>
                                <div id="averagerating" >

                                </div>
                                <h2 style="text-align: center; margin-top: 30px" >All Ratings</h2>
                                <div id="showratings" >

                                </div>

                                <div class="modal" id="myModal1" >
                                    <div class="modal-dialog">

                                        <!-- Modal content-->
                                        <div class="modal-content">
                                            <div class="modal-header " style="background: blue;" >
                                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                <h4 class="modal-title" style="color: white;"> Add Review</h4>
                                            </div>
                                            <div class="modal-body " >
                                                <div>



                                                    <div id="all">

                                                        <form action="" method="post" id="form1">
                                                            <table>
                                                                <tr> <label class="form-group"> Give Ratings..</label>
                                                                <td>
                                                                    <img id="rating_1" src="rating/empty_star.png" onmouseover="fill(this);" onmouseout="unfill(this);" onclick="selected(this);" width="50px;" height="50px;">
                                                                </td>
                                                                <td>
                                                                    <img id="rating_2" src="rating/empty_star.png" onmouseover="fill(this)" onmouseout="unfill(this)" onclick="selected(this)" width="50px;" height="50px;">
                                                                </td>
                                                                <td>
                                                                    <img id="rating_3" src="rating/empty_star.png" onmouseover="fill(this)" onmouseout="unfill(this)" onclick="selected(this)" width="50px;" height="50px;">
                                                                </td>
                                                                <td>
                                                                    <img id="rating_4" src="rating/empty_star.png" onmouseover="fill(this)" onmouseout="unfill(this)" onclick="selected(this)" width="50px;" height="50px;">
                                                                </td>
                                                                <td>
                                                                    <img  id="rating_5" src="rating/empty_star.png" onmouseover="fill(this)" onmouseout="unfill(this)" onclick="selected(this)" width="50px;" height="50px;">
                                                                </td>
                                                                </tr>
                                                            </table>
                                                            <br>
                                                            <label> Write Comment : </label> <input style="border-radius: 20px;" type="text" id="comment"  class="form-group"/>
                                                            <input type="button" value="Submit" class="btn btn-primary"
                                                                   style="border-radius: 10px;text-shadow: 2px 2px 5px black" onclick="addreview()" />
                                                            <label style="display: none;color: tomato;" id="label1">Please Select Any Rating</label>

                                                        </form>
                                                    </div>

                                                </div>   
                                            </div>
                                        </div>
                                        <div class="modal-footer " style="background: blue;" >
                                            <button type="button" class="btn btn-outline-light " style="border-radius: 10px; color: white" data-dismiss="modal"  >Close</button>
                                        </div>


                                    </div>
                                </div>
            </div>
        </div>
        <br>
        <br>
                                
                                
        <div class="section-title-two row text-center">
            <h2>Gallery</h2>
        </div>
    <div class="home-slider owl-theme owl-carousel"  id="card">
        <div class="slider-item-img slider-item-img-three">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="container">
                        <div class="slider-shape">
                            <div class="slider-shape-two">
                                <div class="row">
                                    <div class="col-lg-2"></div>
                                    <img src="myuploads/photo1.webp" class="w-100 p-3" alt="Shape">
                                    <div class="col-lg-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-item-img slider-item-img-three">
            <div class="d-table">
                <div class="d-table-cell">
                    <div class="container">
                        <div class="slider-shape">
                            <div class="slider-shape-two">
                                <div class="row">
                                    <div class="col-lg-2"></div>
                                    <img src="myuploads/photo1.webp" class="w-100 p-3" alt="Shape">
                                    <div class="col-lg-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <br>
        <div class="section-title-two row text-center">
            <h2>Location</h2>
        </div>
        <div class="drop-item drop-img">
            <div class="container">
                <iframe id="map" src="https://www.google.com/maps?q=31.636523442320865,74.87415384903204&z=15&output=embed" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
            </div>
        </div>
        
        
        <!-- Footer -->
        <div th:replace="Footer :: footer"></div>
        <!-- End Footer -->

        


        <!-- Essential JS -->
        <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/bootstrap.bundle.min.js"></script>
        <!-- Owl Carousel JS -->
        <script src="assets/js/owl.carousel.min.js"></script>
        <!-- Meanmenu JS -->
        <script src="assets/js/jquery.meanmenu.js"></script>
        <!-- Slider Slider JS -->
        <script src="assets/js/slick.min.js"></script>
        <!-- Magnific Popup -->
        <script src="assets/js/jquery.magnific-popup.min.js"></script>
        <!-- Wow JS -->
        <script src="assets/js/wow.min.js"></script>
        <!-- Form Ajaxchimp JS -->
		<script src="assets/js/jquery.ajaxchimp.min.js"></script>
		<!-- Form Validator JS -->
		<script src="assets/js/form-validator.min.js"></script>
		<!-- Contact JS -->
		<script src="assets/js/contact-form-script.js"></script>
        <!-- Odometer JS -->
        <script src="assets/js/odometer.min.js"></script>
        <script src="assets/js/jquery.appear.min.js"></script>
        <!-- Custom JS -->
        <script src="assets/js/custom.js"></script>
        <script>
            const params = new URLSearchParams(window.location.search);
            const did= params.get('did');
                                            
                                            function doctorDetails() {
                                                var url="/doctorDetails";
                                                var formData= new FormData();
                                                formData.append("did", did);
                                                fetch(url, {method: "POST", body: formData})
                                                        .then(response => response.text())
                                                        .then(ans2 => renderHTMLforDoctors(ans2));
                                            }
                                            function renderHTMLforDoctors(ans2) {
                                                
                                                var mainobj= JSON.parse(ans2);
                                                var arr= mainobj["ans"];
                                                
                                                var dlatitude =  arr[0].dlatitude;
                                                var dlongitude = arr[0].dlongitude;
                                                
                                                document.getElementById("map").src= "https://www.google.com/maps?q=" + dlatitude +","+ dlongitude + "&z=15&output=embed";
                                                
                                                var orgName= arr[0].dphoto;
                                                var filePath= "myUploads/"+ orgName;
                                                var s="";
                                                s+=`
                                                <div class="page-title-area page-title-two">
                                                    <div class="d-table">
                                                        <div class="d-table-cell">
                                                            <div class="page-title-item-two">
                                                                <h2>${arr[0].dname}</h2>
                                                                <h3>${arr[0].dspecialityname}.</h3>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="doctor-details-area pb-70">
                                                    <div class="container">
                                                        <div class="row justify-content-center">
                                                            <div class="col-lg-5">
                                                                <div class="doctor-details-item doctor-details-left">
                                                                    <img src="${filePath}" alt="Doctor">
                                                                    <div class="doctor-details-contact">
                                                                        <h3>Contact info</h3>
                                                                        <ul>
                                                                            <li>
                                                                                <i class="icofont-ui-call"></i>
                                                                                Call : ${arr[0].dcontact}
                                                                            </li>
                                                                            <li>
                                                                                <i class="icofont-ui-message"></i>
                                                                                <span class="__cf_email__" data-cfemail="5e363b3232311e333b3a2d3b28703d3133">${arr[0].demail}</span>
                                                                            </li>
                                                                            <li>
                                                                                <i class="icofont-location-pin"></i>
                                                                                ${arr[0].daddress}, ${arr[0].dcity}
                                                                            </li>
                                                                        </ul>
                                                                    </div>
        
                                                                    <div class="doctor-details-work">
                                                                        <div class="d-grid gap-2 col-lg-10">
                                                                            <button onclick="book()" class="btn btn-primary btn-lg" type="button">Book Appointment</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-7">
                                                                <div class="doctor-details-item">
                                                                    <div class="doctor-details-right">
                                                                        <div class="doctor-details-biography">
                                                                            <h3>Biography</h3>
                                                                            <p>${arr[0].ddesc}</p><br>
                                                                        </div>
                                                                        <div class="doctor-details-biography">
                                                                            <h3>Education</h3>
                                                                            <ul>
                                                                    `;
                                                                            var educ= arr[0].deducation
                                                                            var x= educ.split(",");
                                                                                for(var i=0; i<x.length; i++) {
                                                                                    s+=`<li>${x[i]}</li>`;
                                                                                }
                                                                            s+=`</ul>
                                                                        </div>
                                                                        <div class="doctor-details-biography">
                                                                            <h3>Experience</h3>
                                                                            <p>${arr[0].dexperience}</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                `;
                                                
                                                document.getElementById("showDetails").innerHTML= s;
                                            }
                                            
                                             function showPhotos() {
                                                var url="/showPhotos";
                                                var formData= new FormData();
                                                formData.append("did", did);
                                                fetch(url, {method: "POST", body: formData})
                                                        .then(response => response.text())
                                                        .then(ans2 => renderPhotos(ans2));
                                            }
                                            
                                            
                                            function renderPhotos(ans) {
                                            var mainobj = JSON.parse(ans);
                                            var arr = mainobj["ans"];

                                            // Get the slider container
                                            var container = document.querySelector(".home-slider");

                                            // Clear previous slides
                                            container.innerHTML = "";

                                            // Add new slides
                                            for (var i = 0; i < arr.length; i++) {
                                                var orgName = arr[i].photo;
                                                var filePath = "myUploads/" + orgName;
                                                container.innerHTML += `
                                                    <div class="slider-item-img slider-item-img-three">
                                                        <div class="d-table">
                                                            <div class="d-table-cell">
                                                                <div class="container">
                                                                    <div class="slider-shape">
                                                                        <div class="slider-shape-two">
                                                                            <div class="row">
                                                                                <div class="col-lg-2"></div>
                                                                                <img src="${filePath}" class="w-100 p-3" alt="Photo">
                                                                                <div class="col-lg-2"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                `;
                                                }

                                                // Destroy existing owl if already initialized
                                                $('.home-slider').trigger('destroy.owl.carousel');

                                                // Reinitialize after slight delay to ensure DOM is updated
                                                setTimeout(() => {
                                                    $(".home-slider").owlCarousel({
                                                        items: 1,
                                                        loop: true,
                                                        nav: true,
                                                        dots: true,
                                                        autoplay: true
                                                    });
                                                }, 100); // 100ms delay ensures proper DOM setup
                                            }
                                            
                                            function book() {
                                                window.location.href="/UserBookAppointment?did="+did;
                                            }
                                            
                                            
            var xhr = new XMLHttpRequest();
            function review()
            {
                $("#myModal1").modal("show");
            }

            var n = 0;
            function fill(obj)
            {
                var img = obj.src;
                var id = obj.id;
                var val = parseInt(id.substring(id.indexOf("_") + 1));
                var i;
                if (n === 0)
                {
                    i = 1;
                } else
                {
                    i = n + 1;
                }
                for (; i <= 5; i++)
                {
                    if (i <= val)
                    {
                        document.getElementById("rating_" + i).src = "rating/filled_star.png";

                    } else
                    {
                        document.getElementById("rating_" + i).src = "rating/empty_star.png";
                    }
                }

            }
            function selected(obj)
            {
                var id = obj.id;
                var val = parseInt(id.substring(id.indexOf("_") + 1));
                n = val;
            }
            function unfill(obj)
            {
                var i;
                if (n === 0)
                {
                    i = 1;
                } else
                {
                    i = n + 1;
                }
                for (; i <= 5; i++)
                {
                    document.getElementById("rating_" + i).src = "rating/empty_star.png";
                }
            }

            function addreview()
            {
                //var doctor_email = document.getElementById("d2").innerText;

                var comment = document.getElementById("comment").value;
                

                var url = "./userAddReview?did=" + did + "&rating=" + n + "&comment=" + comment;

                fetch(url).then(response => response.text())
                        .then(ans => renderAddReviewResponse(ans));


            }

            function renderAddReviewResponse(ans) {
                alert(ans);
            }

            function userShowRatings() {
                //var doctor_email = document.getElementById("d2").innerText;
                //1. Make object of XMLHttpRequest
                var xhttp = new XMLHttpRequest();

                //4. Receive XMLHttpResponse from server & use ans

                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        var res = this.responseText;
                        res = res.trim();
                        var mainobj = JSON.parse(res);
                        var arr = mainobj["ans"];

                        var ren = "";

                        for (var i = 0; i < arr.length; i++)
                        {
                            var st = arr[i];
                            ren += "<div class=\"row\" >";

                            
                            ren += "<div class= \"col-sm-3\" style=\"text-align: center\" >";
                            ren += "<div class=\"card-body\">";
                            ren += "<label class=\"card-text text-alli\" style=\"font-size: 16px;text-align: center;color: #005b9a\" ><b>User Email : </b><br>" + st.uemail + "</label><br><br>";
                            ren += "</div>";
                            ren += "</div>";


                            ren += "<div class= \"col-sm-6\" style=\"text-align: center\" >";
                            ren += "<div class=\"card-body\">";
                            for (var j = 0; j < st.rating; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/filled_star.png\" >";
                            }
                            for (var j = st.rating; j < 5; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/empty_star.png\" >";
                            }
                            ren += "</div>";
                            ren += "</div>";
                            
                            
                            
                            ren += "<div class= \"col-sm-3\" style=\"text-align: center\" >";
                            ren += "<div class=\"card-body\">";
                            ren += "<label class=\"card-text text-alli\" style=\"font-size: 16px;text-align: center;color: #005b9a\" ><b>Comment : </b><br>" + st.comment + "</label><br><br>";
                            ren += "</div>";
                            ren += "</div>";
                            
                            ren += "</div>";

                        }

                        document.getElementById("showratings").innerHTML = ren;
                        averageRating();
                    }
                };
                //2. Prepare request (Define target --> servlet)
                xhttp.open("GET", "./userShowRatings?did=" + did, true);

                //3. Send Request
                xhttp.send();
            }

            function averageRating() {
                //var doctor_email = document.getElementById("d2").innerText;

                //1. Make object of XMLHttpRequest
                var xhttp = new XMLHttpRequest();

                //4. Receive XMLHttpResponse from server & use ans
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        var res = this.responseText;
                        res = res.trim();
//                        alert(res);
                        var mainobj = JSON.parse(res);
                        var arr = mainobj["ans"];

                        var ren = "";

                        var st = arr[0];
                        var rating2 = st.r1;
                        var getdecimal = rating2.toString().split(".")[1];
                        if (parseInt(getdecimal) == 0) {
                            ren += "<div class= \"col-sm-12\" style=\"text-align: center\" >";
                            ren += "<div class=\"card-body\">";
                            for (var j = 0; j < st.r1; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/filled_star.png\" >";
                            }
                            for (var j = st.r1; j < 5; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/empty_star.png\" >";
                            }
                            ren += "</div>";
                            ren += "</div>";
                        } else {
                            ren += "<div class= \"col-sm-12\" style=\"text-align: center\" >";
                            ren += "<div class=\"card-body\">";
                            for (var j = 0; j < st.r1 - 1; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/filled_star.png\" >";
                            }
                            ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/download.jpg\" >";
                            for (var j = st.r1; j < 4; j++) {
                                ren += "<img class=\"img-thumbnail\" style=\"border: 2px solid black; border-radius: 10px;width: 20px; height: 20px\" src=\"rating/empty_star.png\" >";
                            }
                            ren += "</div>";
                            ren += "</div>";
                        }

                        document.getElementById("averagerating").innerHTML = ren;
                    }
                };
                //2. Prepare request (Define target --> servlet)
                xhttp.open("GET", "./userShowAverageRatings?did=" + did, true);

                //3. Send Request
                xhttp.send();
            }

                                            
                                            
        </script>
        
    </body>

</html> 